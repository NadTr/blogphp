{% extends "layout.twig" %}

{% block content %}

<h1>Mes articles</h1>

{% if (session.permission <= 2) and (session.permission > 0) %}

	<form method="post" action="{{path_for('add')}}">
		<div class="form-group">
			<label for="formGroupExampleInput">title</label>
			<input type="text" class="form-control" id="formGroupExampleInput" placeholder="title" name="title">
		</div>
		<div class="form-group">
			<label for="formGroupExampleInput2">Text</label>
			<textarea name="text" class="form-control" placeholder="text" ></textarea>
		</div>
		<input type="submit" name="add article">
	</form>
	{% endif %}

	{% for article in articles  %}

	<h2>{{article.title}}</h2>
	<p>{{article.text}} </p>
	<p>	{{article.date|date()}}<p>
	<p> auteur(s) : {{article.author}}</p>

	{% if session.permission == 1 %}

	<p><a href="{{path_for('edit', {'id':article.id})}}">Edit</a></p>
	{% endif %}
	<h3>Comments</h3>
	{% for comment in article.comments %} 
			

	<h2>helllooooool{{comment.title}}</h2>
	<p>{{comment.text}} </p>
	<p>	{{comment.date|date()}}<p>
	<p> auteur(s) : {{comment.commentator}}</p>

	{% if session.permission == 1 %}

	<p><a href="{{path_for('editCom', {'id':comment.id})}}">Edit</a></p>
	{% endif %}
	{% endfor %}
	{% if (session.permission <= 3) and (session.permission > 0) %}

	<form method="post" action="{{path_for('addCom')}}">
		<div class="form-group">
			<label for="formGroupExampleInput">title</label>
			<input type="text" class="form-control" id="formGroupExampleInput" placeholder="title comment" name="title">
		</div>
		<div class="form-group">
			<label for="formGroupExampleInput2">Text</label>
			<textarea name="text" class="form-control" placeholder="text comment" ></textarea>
		</div>
		<input type="hidden" name="art" id="art" value="{{article.id}}">
		<input type="submit" name="add comment">
	</form>
	{% endif %}
	{% endfor %}
{% endblock %}
